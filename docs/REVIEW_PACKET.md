# Review Packet â€” ai-ops-runner

## Required Sections

Every review packet submitted to Codex must include:

### 1. Header
- Repository: `ai-ops-runner`
- Review range: `<baseline_sha>..<head_sha>`
- Generated by: `ops/review_bundle.sh`
- Timestamp: ISO 8601

### 2. Changed Files
List of all files changed in the range with status (A/M/D).

### 3. Diff Hunks
Unified diff output, bounded to the size cap.

### 4. Review Instructions
The reviewer is instructed to:
- Output STRICT JSON matching `ops/schemas/codex_review_verdict.schema.json`
- Verdict: `APPROVED` or `BLOCKED`
- Only BLOCK for: deploy/compile failures, unsafe behavior, logging/run-day regressions, non-idempotent operations
- List all blockers in `blockers[]`
- List non-blocking suggestions in `non_blocking[]`
- Report `tests_run` as a string summary

## Template

```
=== REVIEW PACKET ===
Repository: ai-ops-runner
Range: <baseline>..<head>
Generated: <ISO timestamp>

=== CHANGED FILES ===
<file list>

=== DIFF ===
<unified diff>

=== INSTRUCTIONS ===
You are reviewing a diff for the ai-ops-runner repository.
Output ONLY valid JSON matching the schema below.
Do NOT include any text outside the JSON object.

Schema:
{
  "verdict": "APPROVED" or "BLOCKED",
  "blockers": ["string", ...],
  "non_blocking": ["string", ...],
  "tests_run": "string"
}

BLOCK only for:
- Deploy/compile failures
- Unsafe behavior (shell injection, credential leaks, etc.)
- Logging or run-day regressions
- Non-idempotent operations that could cause drift
```

## Verdict Schema

See `ops/schemas/codex_review_verdict.schema.json` for the canonical JSON Schema definition.

## Size Cap

Review bundles are capped at 200 KB. If exceeded, `review_bundle.sh` exits with code 6
and prints per-file size suggestions. The automation then switches to per-file packet mode.
